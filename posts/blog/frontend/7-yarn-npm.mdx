---
title: npm, yarn, yarn berry 비교해보기
description: JavaScript의 패키지 매니저인 npm, yarn, yarn berry의 차이점과 각각의 장단점에 대해 알아보겠습니다.
image: '/posts/7-yarn-npm/cover.png'
tags:
  - npm
  - yarn
  - yarn berry

date: 2023-08-27 11:05:51
---

> ## 글을 시작하며

JavaScript로 프로젝트를 진행할 때 대표적으로 쓰이는 패키지 관리 툴로는 npm과 yarn이 있습니다.
패키지들을 사용하기 위해서는 **다운로드, 업데이트, 의존성 관리** 등 복잡한 상황들이 많이 생기는데 패키지 매니저를 사용하면 이러한 과정들을 편리하고 안전하게 수행할 수 있습니다.

이번 글에서는 프로젝트에서 적절한 패키지 관리자를 선택해서 사용할 수 있도록
`npm`, `yarn` 그리고 `yarn berry`의 장단점과 특징에 대해 배워보겠습니다.

---

## npm

npm(node package manager)은 JavaScript 런타임 환경인 Node.js의 기본 패키지 관리자입니다.
하지만 npm이 있는데도 왜 yarn이 개발 되었을까요?
보통 새로운 기술이 개발된 이유는 이전의 단점을 개선하기 위해서입니다.

npm의 단점에 대해 알아보겠습니다.

### 1. 일관적이지 않은 패키지 버전

#### 시멘틱 버저닝

노드 모듈들은 기본적으로 `시멘틱 버저닝`이라는 기법을 사용하여 모듈의 버전을 나타냅니다.
간단히 말해 `1.2.3`처럼 버전을 세 가지 숫자로 구분하고 각 자리에 현재 버전이 이전 버전과 어떤 관계가 있는지 암시하는 방법입니다.

#### 캐럿 기호

또다른 특징으로는 캐럿 기호(^)를 이용해서 첫 번째 숫자를 제외한 `두 자리(마이너, 패치) 버전까지는 변경을 허용`할 수 있습니다. 예를 들어 버전이 `^1.2.3`이라면, 메이저 버전인 1은 변경되지 않는 범위에서 `1.2.0` `1.2.4` 등 **모듈의 버전이 바뀌는 것을 허용**합니다.

따라서 `npm install` 명령어로 모듈을 설치하면 메이저 버전 중 최신 버전을 다운받게 됩니다.
그렇다면 최신 버전이 나올 때마다 설치되는 버전이 달라지는 문제가 생길 수도 있지 않을까요?

맞습니다!

> 캐럿 기호로 인한 버전 변경 허용으로 인해 `모듈간의 버전이 일치하지 않는 문제`가 발생할 수 있습니다.

### 2. 고정되지 않은 설치 순서

개발자의 **환경에 따라 모듈들의 설치 순서가 변경**될 수 있습니다.
이미 만들어진 프로젝트에서 모듈을 추가로 설치하게 될 경우 `npm install` 명령어를 통해 처음부터 설치하는 사람과의 설치 순서가 달라질 수 있습니다.

> 왜냐하면 npm은 `개발자들이 어떤 순서로 추가했는지 알 수 없기 때문`에 모듈 이름을 사전 순서대로 정렬하여 순차적으로 설치합니다.

### 3. 순차적인 설치로 인한 긴 소요시간

---

## yarn

yarn은 npm의 문제들을 해결함과 동시에 여러 기능을 탑재하여 등장하였습니다.

### 1. 버전 고정을 위한 yarn.lock

yarn은 사용할 모듈의 버전을 지정하기 위해 `yarn.lock` 파일을 포함합니다.
따라서 개발자들이 항상 같은 버전의 모듈을 사용할 수 있도록 보장합니다.

npm도 이러한 문제를 해결하기 위해서 `npm shrinkwrap` 명령어로 버전을 .json 파일에 명시하였습니다.

하지만 npm의 경우 고정이 필요할 때마다 명령어를 입력 해야하는 번거로움이 있지만
yarn의 경우 lock 파일을 자동으로 추가하기 때문에 편리합니다.

2. 설치 확인을 위한 checksum
3. 캐시를 통한 속도 개선

---

## yarn berry

하지만 npm과 yarn의 공통적인 단점은 node_modules를 사용하기 때문에 유령 의존성 문제가 생긴다는 것입니다.
yarn berry는 이러한 점을 개선하기 위해 Plug'n'Play와 Zero install 방식을 사용하여 패키지를 관리합니다.

1. Plug'n'Play
2. Zero Install
