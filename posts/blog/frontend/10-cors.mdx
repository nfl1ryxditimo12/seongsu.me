---
title: CORS 문제 해결하기
description: 웹 개발자라면 한 번쯤 마주할 CORS 에러가 무엇인지와 이것을 해결할 수 있는 방법에 대해 알아보겠습니다.
icon: ''
image: '/posts/10-cors/cover.png'
tags:
  - CORS
date: 2023-09-23 23:40:17
---

> ## 글을 시작하며

웹 개발자의 신입 신고식이라고 할 정도로, CORS는 웹 개발자라면 한 번씩은 겪게 되는 문제입니다.
CORS 에러를 처음 접한 순간엔 백엔드와 프론트엔드 중 어떤 파트에서 이 에러를 해결해야 하는지 감이 안 잡힐 수도 있는데요
이번 포스팅을 통해서 CORS 에러란 무엇인지와 해결하기 위해 필요한 방법들에 대해서 배워보도록 하겠습니다.

---

## CORS

CORS(Cross-Origin Resource Sharing)는 이름 그대로 출처(Origin)가 다른 자원들을 공유한다는 뜻입니다.

쉽게 말하자면, 다른 출처의 자원에 접근해서 리소스를 사용한다는 의미입니다!

먼저 출처라는 개념에 대해서 알아보겠습니다.

---

## 출처

```
https://google.com:80/search?page=1
```

요 url은 우리가 자주 접하는 구글의 url입니다.

위의 구성요소 중에서 `Protocol(https://) + Host(google.com) + Port(80)` 3가지가 같으면 동일한 출처(Origin)라고 합니다.

<br />

### 왜 다른 출처는 막아두나요?

우리는 웹에서 `<img>` `<script>` `<frame>` `<video>` 태그들을 사용하면서 새로운 자원들을 외부에서 가져올 수 있습니다.

만약 은행 홈페이지에 들어가던 중, 악성 코드가 심어진 `<script>` 파일이 포함된 evil.com 페이지를 열게 된다면 어떤 일이 일어날까요?

안타깝게도 script에는 `Delete/account` 요청이 담겨있어서 유저의 계좌가 삭제되어버렸습니다... 🙏😰

이러한 예상치 못한 사고들을 막으며 보안을 강화하기 위해 다른 출처의 접근을 막는 정책이 등장하게 되었습니다.

---

## 동일 출처 정책 (Same-origin policy)

따라서 동일한 출처에서만 리소스를 공유하고 있다는 정책을 사용하게 되었습니다.

여기서의 동일한 출처란, 요청하는 클라이언트와 요청받는 서버가 같은 출처에 있다면 동일 출처이며 다른 서버에 있다면 다른 출처라고 취급합니다.

![230929-232531](/posts/10-cors/230929-232531.png)

예를 들어, 위 사진에서 domain-a.com의 유저가 domain-b.com 서버에 요청하게 되면 호스트가 다르기 때문에 다른 출처에 요청한 상태인 것입니다.
도메인 외에도 같은 프로젝트 내에서 정의된 css 파일에 대한 요청은 동일 출처 요청이며
폰트 같은 경우에는 google과 같은 외부 사이트에서 리소스를 가져온다면 다른 출처 요청이라고 할 수 있습니다.

하지만 이렇게 엄격하게 차단해버리면 원하는 페이지를 만들 수 있게 될까요?
오픈된 인터넷 환경에서 다른 출처의 리소스를 가져와 사용하는 일은 흔한 일입니다.

따라서 몇 가지 예외 조항을 두고 다른 출처의 리소스를 허용하는 정책이 등장했습니다.
그것은 바로 CORS 정책을 지킨 리소스 요청입니다!

---

## 다른 출처 정책

### 단순요청 (Simple Request)

### 프리 플라이트 (Preflight Request)

### 신용 요청 (Credentialed Request)
