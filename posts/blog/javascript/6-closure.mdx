---
title: JavaScript의 Closure란?
description: 
icon: ''
image: '/posts/6-closure/cover.png'
tags:
  - JavaScript
  - Closure
date: 2023-08-25 22:51:46
---

> ## 글을 시작하며

클로저란 무엇일까요?
클로저란, 함수와 함수가 선언되었을 때의 렉시컬 환경의 조합입니다.

이 정의를 쉽게 표현하자면 다음과 같이 풀어낼 수 있습니다.
- 클로저란, 자신이 선언된 당시의 환경을 기억하는 함수입니다.
- 클로저란, 생명 주기가 끝난 외부 함수의 식별자에 접근할 수 있는 내부 함수입니다.

지금부터 클로저를 이해하는데 필요한 선행 지식들을 배워보고 클로저는 어떤 상황에 사용되는지 알아보겠습니다.

---

## 선행 지식

### 스코프
- 변수에 접근할 수 있는 범위, JS에는 전역 스코프와 지역 스코프 타입이 있습니다.

### 렉시컬 스코프
- 함수를 어디에 `선언`하였는지에 따라 `상위 스코프가 결정`됩니다. 이를 정적 스코프라고 부르기도 합니다.

```javascript
var x = 1;

function foo() {
	var x = 10;
	bar();
}

function bar() {
	console.log(x);
}

foo(); // 1
bar(); // 1
```

1. bar()에서 참조하는 x 변수는 bar()의 상위 스코프가 무엇인지에 따라 결정됩니다.
2. bar()는 전역에 선언되었으므로, 상위 스코프는 전역 스코프가 됩니다.
3. 따라서 bar()의 x는 전역에 선언된 x 변수를 참조하게 됩니다.

---

## 동작 원리

이제 클로저를 이해하기 위한 준비가 끝났습니다!
그렇다면 클로저는 어떻게 동작하게 되는 걸까요? 그 원리에 대해 알아봅시다.

- 클로저는 자신이 생성될 때의 환경(=렉시컬 스코프)을 기억하는 함수입니다.
- 자바스크립트의 모든 함수는 [[Environment]]라 불리는 숨김 프로퍼티를 갖습니다. 이곳에 렉시컬 스코프에 대한 참조값이 저장됩니다.
- 함수 본문에서 [[Environment]]를 사용해서 외부 함수의 변수에도 접근할 수 있게 됩니다.

😇 쉽게 이해하기

- 클로저 = 함수 + 렉시컬 스코프
- JS의 모든 함수는 자신이 생성된 환경의 주소를 저장하고 있습니다다. 즉, 상위 스코프의 주소를 가지고 있는 것이죠.
- 함수 본문에서 상위 스코프의 주소를 참조하여 외부 함수의 변수에도 접근할 수 있게 됩니다.

--

## 클로저를 왜 사용하는 걸까요?

### 1. 정보 은닉

변수 값을 은닉할 수 있습니다. 클래스 기반 언어의 private 키워드를 흉내낼 수 있습니다.

### 2. 전역 변수 사용 억제

전역 변수를 대체하여 오류를 피하는 안정성을 증가시킬 수 있습니다.

### 3. 상태 유지

현재 상태를 기억하고 변경된 최신 상태를 유지할 수 있습니다.
